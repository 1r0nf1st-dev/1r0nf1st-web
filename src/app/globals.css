@import "tailwindcss";

/* Class-based dark mode (toggle via .dark on html) */
@custom-variant dark (&:where(.dark, .dark *));

/* Semantic theme tokens â€“ light (default) */
@theme {
  --color-background: #f5f5f7;
  --color-surface: #ffffff;
  --color-surface-soft: #fafafa;
  --color-foreground: #1a1a1a;
  --color-primary: #6366f1;
  --color-primary-strong: #4f46e5;
  --color-muted: #6b7280;
  --color-border: rgba(99, 102, 241, 0.4);
  --color-border-strong: rgba(99, 102, 241, 0.55);
  --radius-xl: 1.5rem;
  --shadow-soft: 0 4px 6px -1px rgba(99, 102, 241, 0.1), 0 2px 4px -1px rgba(99, 102, 241, 0.06);
  --shadow-md: 0 10px 15px -3px rgba(99, 102, 241, 0.15), 0 4px 6px -2px rgba(99, 102, 241, 0.1);
}

/* Dark theme overrides */
.dark {
  --color-background: #0a0a0a;
  --color-surface: rgba(20, 20, 20, 0.95);
  --color-surface-soft: rgba(30, 30, 30, 0.8);
  --color-foreground: #f5f5f5;
  --color-primary: #818cf8;
  --color-primary-strong: #6366f1;
  --color-muted: #a1a1aa;
  --color-border: rgba(161, 161, 170, 0.2);
  --color-border-strong: rgba(161, 161, 170, 0.4);
  --shadow-soft: 0 18px 45px rgba(0, 0, 0, 0.8);
}

/* Legacy CSS variables for existing components (until migrated) */
:root {
  color-scheme: light;
  --bg: #f5f5f7;
  --bg-elevated: rgba(255, 255, 255, 0.95);
  --bg-elevated-soft: #fafafa;
  --border-subtle: rgba(99, 102, 241, 0.4);
  --accent: #6366f1;
  --accent-soft: rgba(99, 102, 241, 0.15);
  --accent-strong: #4f46e5;
  --text-main: #1a1a1a;
  --text-muted: #6b7280;
  --text-secondary: #9ca3af;
  --border-strong: rgba(99, 102, 241, 0.55);
  --shadow-soft: 0 4px 6px -1px rgba(99, 102, 241, 0.1), 0 2px 4px -1px rgba(99, 102, 241, 0.06);
  --radius-xl: 1.5rem;
}

.dark {
  color-scheme: dark;
  --bg: #0a0a0a;
  --border-strong: rgba(161, 161, 170, 0.4);
  --bg-elevated: rgba(20, 20, 20, 0.95);
  --bg-elevated-soft: rgba(30, 30, 30, 0.8);
  --border-subtle: rgba(161, 161, 170, 0.2);
  --accent: #818cf8;
  --accent-soft: rgba(129, 140, 248, 0.18);
  --accent-strong: #6366f1;
  --text-main: #f5f5f5;
  --text-muted: #a1a1aa;
  --text-secondary: #d4d4d8;
  --shadow-soft: 0 18px 45px rgba(0, 0, 0, 0.8);
}

*,
*::before,
*::after {
  box-sizing: border-box;
}

/* Logo-inspired subtle background (Katana-style): soft glow from top-right, gradient through pink to purple/blue. Light theme: softer opacities. */
body {
  margin: 0;
  min-height: 100vh;
  font-family:
    system-ui,
    -apple-system,
    BlinkMacSystemFont,
    "SF Pro Text",
    sans-serif;
  background:
    radial-gradient(circle at 85% 15%, rgba(251, 191, 36, 0.1), transparent 55%),
    radial-gradient(circle at 70% 30%, rgba(236, 72, 153, 0.08), transparent 55%),
    radial-gradient(circle at 20% 80%, rgba(99, 102, 241, 0.08), transparent 60%),
    var(--bg);
  color: var(--text-main);
  position: relative;
}

body::before {
  content: "";
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 0;
  background-image:
    radial-gradient(circle at 10% 20%, rgba(251, 191, 36, 0.045) 0%, transparent 1.5%),
    radial-gradient(circle at 90% 15%, rgba(236, 72, 153, 0.04) 0%, transparent 1.5%),
    radial-gradient(circle at 50% 70%, rgba(99, 102, 241, 0.04) 0%, transparent 1.5%),
    radial-gradient(circle at 25% 40%, rgba(168, 85, 247, 0.03) 0%, transparent 1.5%);
  background-size: 120px 120px, 100px 100px, 140px 140px, 110px 110px;
  background-position: 0 0, 40px 20px, 20px 60px, 60px 40px;
}

.dark body {
  background:
    radial-gradient(circle at 85% 15%, rgba(251, 191, 36, 0.12), transparent 55%),
    radial-gradient(circle at 70% 30%, rgba(236, 72, 153, 0.1), transparent 55%),
    radial-gradient(circle at 20% 80%, rgba(99, 102, 241, 0.1), transparent 60%),
    var(--bg);
  color: var(--text-main);
}

#__next {
  min-height: 100vh;
  position: relative;
  z-index: 1;
}

.dark body::before {
  opacity: 0.8;
}

/* Robot walk-and-raise: shared motion (walk + raise). Play-once ends raised; loop version adds return. */
@keyframes robotWalkRaise {
  0% { transform: translate(0, 0) scale(0.98); }
  8% { transform: translate(3%, 1.5%) scale(0.98); }
  16% { transform: translate(6%, 0) scale(0.98); }
  24% { transform: translate(10%, 2%) scale(0.98); }
  32% { transform: translate(14%, 0) scale(0.98); }
  40% { transform: translate(18%, 1.5%) scale(0.98); }
  48% { transform: translate(22%, 0) scale(0.98); }
  56% { transform: translate(26%, 1%) scale(0.98); }
  64% { transform: translate(28%, 0) scale(0.99); }
  72% { transform: translate(28%, -3%) scale(0.995); }
  80% { transform: translate(28%, -6%) scale(1); }
  88% { transform: translate(28%, -8%) scale(1); }
  100% { transform: translate(28%, -8%) scale(1); }
}

@keyframes robotWalkRaiseLoop {
  0% { transform: translate(0, 0) scale(0.98); }
  8% { transform: translate(3%, 1.5%) scale(0.98); }
  16% { transform: translate(6%, 0) scale(0.98); }
  24% { transform: translate(10%, 2%) scale(0.98); }
  32% { transform: translate(14%, 0) scale(0.98); }
  40% { transform: translate(18%, 1.5%) scale(0.98); }
  48% { transform: translate(22%, 0) scale(0.98); }
  56% { transform: translate(26%, 1%) scale(0.98); }
  64% { transform: translate(28%, 0) scale(0.99); }
  72% { transform: translate(28%, -3%) scale(0.995); }
  80% { transform: translate(28%, -6%) scale(1); }
  88% { transform: translate(28%, -8%) scale(1); }
  92% { transform: translate(21%, -5%) scale(0.99); }
  96% { transform: translate(10%, -2%) scale(0.98); }
  100% { transform: translate(0, 0) scale(0.98); }
}

.robot-walk-raise,
.robot-walk-raise-loop {
  will-change: transform;
  backface-visibility: hidden;
}

.robot-walk-raise {
  animation: robotWalkRaise 3.5s cubic-bezier(0.33, 1, 0.68, 1) 1 forwards;
}

.robot-walk-raise-loop {
  animation: robotWalkRaiseLoop 4s cubic-bezier(0.33, 1, 0.68, 1) infinite;
}

@media (prefers-reduced-motion: reduce) {
  .robot-walk-raise,
  .robot-walk-raise-loop {
    animation: none;
    will-change: auto;
    transform: translate(28%, -8%) scale(1);
  }
}

/* TipTap editor styles */
.ProseMirror { outline: none; }
.ProseMirror p { margin: 0.5em 0; }
.ProseMirror p:first-child { margin-top: 0; }
.ProseMirror p:last-child { margin-bottom: 0; }
.ProseMirror ul, .ProseMirror ol { padding-left: 1.5em; margin: 0.5em 0; }
.ProseMirror li { margin: 0.25em 0; }
.ProseMirror h1, .ProseMirror h2, .ProseMirror h3, .ProseMirror h4, .ProseMirror h5, .ProseMirror h6 {
  font-weight: 600; margin-top: 1em; margin-bottom: 0.5em;
}
.ProseMirror h1 { font-size: 2em; }
.ProseMirror h2 { font-size: 1.5em; }
.ProseMirror h3 { font-size: 1.25em; }
.ProseMirror a { color: var(--color-primary); text-decoration: underline; }
.ProseMirror a:hover { color: var(--color-primary-strong); }
.ProseMirror img { max-width: 100%; height: auto; border-radius: 0.5rem; }
.ProseMirror strong { font-weight: 600; }
.ProseMirror em { font-style: italic; }
.ProseMirror code {
  background-color: rgba(99, 102, 241, 0.1);
  padding: 0.125em 0.25em;
  border-radius: 0.25rem;
  font-family: monospace;
  font-size: 0.9em;
}
.dark .ProseMirror code { background-color: rgba(129, 140, 248, 0.2); }

/* TipTap table styles */
.ProseMirror table {
  border-collapse: collapse; margin: 1rem 0; table-layout: fixed;
  width: 100%; overflow: hidden;
}
.ProseMirror table td, .ProseMirror table th {
  min-width: 1em; border: 1px solid rgba(99, 102, 241, 0.3);
  padding: 0.5rem; vertical-align: top; box-sizing: border-box; position: relative;
}
.dark .ProseMirror table td, .dark .ProseMirror table th {
  border-color: rgba(161, 161, 170, 0.3);
}
.ProseMirror table th { font-weight: 600; text-align: left; background-color: rgba(99, 102, 241, 0.1); }
.dark .ProseMirror table th { background-color: rgba(129, 140, 248, 0.15); }
.ProseMirror table .selectedCell:after {
  z-index: 2; position: absolute; content: ""; left: 0; right: 0; top: 0; bottom: 0;
  background: rgba(99, 102, 241, 0.1); pointer-events: none;
}
.dark .ProseMirror table .selectedCell:after { background: rgba(129, 140, 248, 0.15); }
.ProseMirror table .column-resize-handle {
  position: absolute; right: -2px; top: 0; bottom: -2px; width: 4px;
  background-color: rgba(99, 102, 241, 0.5); pointer-events: none;
}
.dark .ProseMirror table .column-resize-handle { background-color: rgba(129, 140, 248, 0.5); }
.ProseMirror .resize-cursor { cursor: ew-resize; cursor: col-resize; }

/* TipTap task list styles */
.ProseMirror ul[data-type="taskList"] { list-style: none; padding: 0; }
.ProseMirror ul[data-type="taskList"] li { display: flex; align-items: flex-start; }
.ProseMirror ul[data-type="taskList"] li > label { flex: 0 0 auto; margin-right: 0.5rem; user-select: none; }
.ProseMirror ul[data-type="taskList"] li > div { flex: 1 1 auto; }
.ProseMirror ul[data-type="taskList"] input[type="checkbox"] { cursor: pointer; }

/* TipTap highlight styles */
.ProseMirror mark { background-color: #fef08a; border-radius: 0.25rem; padding: 0.125rem 0; }
.dark .ProseMirror mark { background-color: #713f12; }

.ProseMirror.has-focus { outline: none; }
